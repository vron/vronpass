<html>
	<head>
		<title>Passkeep</title>
		<!-- Fix below to remove http prot --!>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
		<script src="sjcl.js"></script>
		<script type="application/javascript">
function getdata() {
	// Create a sample data sample
	var data = {};
	data.pairs = [];
	data.pairs[0] = {};
	data.pairs[0].title = "Facbook";
	data.pairs[0].desc  = "Some additional information";
	data.pairs[0].pass  = "vron";

	var s = JSON.stringify(data);

	var encp = {
		"v":1,
		"iter":1000,
		"ks":256,
		"ts":128,
		"mode":"ccm",
		"cipher":"aes",
	};

	var d = sjcl.json.encrypt("sf",s, encp);

	// try catch around this thing!
	//var u = sjcl.json.decrypt("sf",d);

	return d
}

// Set up everything
function newdata(d, pass) {
	// Decrypt the message
	var data;
	console.log(pass);
	try {
		data = sjcl.json.decrypt(pass,d);
	} catch(err) {
		console.log(err);
	}
	console.log(data);
	$("body").html("");
}

$(document).ready(function(){
	// Load the data
	var d = getdata();
	newdata(d,$("#pass").val());
});
		</script>
	</head>
	<body>
		<p><input id="pass" type="password" value="sf" /></p>
		<p><input type="button" value="Login" /></p>
	</body>
</html>
